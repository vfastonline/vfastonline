<!DOCTYPE html>
<html>
<head>
    <title></title>
    {% include "head.html" %}

    <link href="/static/css/video-js.css" rel="stylesheet">
    <link href="/static/css/video-js-develop.css" rel="stylesheet">

    <style>
        #head_cont{
            box-shadow: none;
        }
        .course_head{
            width: 1200px;
            height: 418px;
            margin: 0 auto;
            position: relative;
            top: 80px;
        }
        /*course_head END*/
        /*course_head_BG Start*/
        .course_head_BG{
            background-color: #303948;
            position: relative;
            padding: 50px 0px 0px;
            height:380px;
            margin-bottom: 300px;
        }
        .course_head_BG>h1{
            width: 1200px;
            margin: 0 auto;
            color: #FFFFFF;
            font-size: 55px;
        }
        /*course_head_BG End*/

        /*video 设置*/
        .vjs-volume-control.vjs-control{
            display: none;
        }
        .vjs-mute-control.vjs-control{
            display: none;
        }
        #example_video_1{
            border-radius: 4px 0px 0px 4px;
        }
        .video_play_svg_div{
            position: absolute;top: 150px;left: 345px;
        }
        .video_bofang{
            position: absolute;top: 160px;left: 360px;
        }
        /*video 设置*/
        .course_desc{
            position: absolute;
            height:100%;
            top:0;
            right: 0;
            width:38%;
            background: #FFFFFF;
            box-shadow: 0 2px 0 0 rgba(181,181,181,0.10);
            border-radius: 0px 4px 4px 0px;
            padding: 30px 40px 20px 40px;
        }
        .course_desc>h3{
            font-size: 24px;
            color: #384047;
        }
        .course_desc>.course_desc_text{
            margin-top: 20px;
            font-size: 14px;
            color: #5A646E;
            height:140px;
            max-height: 140px;
            overflow: hidden;
        }
        .course_desc>.course_play_div{
            text-align: center;
            position: relative;
            margin-top: 30px;
        }
        .course_desc>.course_play_div>div{
            display: inline;
            font-size: 16px;
            color: #3572A5;
            letter-spacing: 0.62px;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        .course_desc>.course_play_div>div:hover{
            opacity: 0.8;
            cursor: pointer;
        }
        .course_desc>.course_play_div>div:active{
            opacity: 1;
            cursor: pointer;
        }
        .course_desc>.course_play_div>span{
            position: absolute;
            top:4px;
            right: 0;
            font-size: 14px;
            color: #5A646E;
            letter-spacing: 0.54px;
            font-weight: 400;
        }
        .course_desc>.difficulty{
            margin-top: 15px;
            font-size: 16px;
            color: #5A646E;
            line-height: 22px;
            text-align: right;
        }
        .course_desc>.difficulty>img{
            margin-bottom: 5px;
        }
        .progressBar {
            position: relative;
            height: 12px;
            border-radius: 12px;
            background: #EEF1F7;
            margin-top: 10px;
        }
        .progressBar > span {
            position: absolute;
            height: 12px;
            border-radius: 12px;
        }

        /*course_info start*/
        .course_info{
            width:1200px;
            margin: 50px auto;
            background: #FFFFFF;
            box-shadow: 0 2px 0 0 rgba(181,181,181,0.10);
            border-radius: 4px;
        }
        .course_info>.left{
            float: left;
            width:65%;
            padding: 0 80px 0 40px;
        }
        .course_info>.right{
            float: left;
            width:35%;
        }
        .course_info>.left>h2{
            font-size: 18px;
            color: #5A646E;
            letter-spacing: 1.5px;
            margin-top: 30px;
        }
        .course_info>.left>div{
            font-size: 14px;
            color: #5A646E;
            letter-spacing: 0.54px;
        }
        .course_info>.left>.text{
            margin-left: 20px;
        }
        .course_info>.left>.course_section{
            margin-left: 20px;
            margin-bottom: 30px;
        }
        .course_info>.left>.course_section>h3{
            font-size: 14px;
            color: #384047;
            letter-spacing: 0.54px;
        }
        .course_info>.left>.course_section>div>div:first-child{
            padding-left: 10px;
            float: left;
            width:14%;
            font-size: 14px;
            color: #5A646E;
            letter-spacing: 0.54px;
            opacity: 0.8;
        }
        .course_info>.left>.course_section>div>div:first-child>img{
            margin-bottom: 5px;
            transition: transform 0.35s ease-in-out;
        }
        .img_down{
            transform: rotate(0);
        }
        .img_right{
            transform: rotate(-90deg);
        }
        .course_info>.left>.course_section>div>div:first-child:hover{
            cursor: pointer;
            opacity: 1;
        }
        .course_info>.left>.course_section>div>div:first-child:active{
            cursor: pointer;
            opacity: 0.8;
        }
        .course_info>.left>.course_section>div>div:last-child{
            float: left;
            width:86%;
        }
        .course_info>.left>.course_section>ul{
            margin-top: 15px;
            overflow: hidden;
        }
        .course_info>.left>.course_section>ul>li{
            padding-left: 14%;
            height:24px;
            margin-top: 5px;
            display: none;
        }
        .course_info>.left>.course_section>ul>li:hover{
            background: #FAFAFA;
            cursor: pointer;
        }
        .course_info>.left>.course_section>ul>li>img{
            margin-right: 15px;
        }

        .course_info>.left>.course_section>ul>li>span{
            float: right;
        }

        /* right*/
        .course_info>.right>h2{
            font-size: 18px;
            color: #5A646E;
            letter-spacing: 1.5px;
            margin-top: 30px;
        }
        .course_info>.right>div{
            padding: 10px 50px 10px 0px;
        }
        .course_info>.right>div>div:first-child{
            position: relative;
            float: left;
            width:35%;
            height:110px;
        }
        .course_info>.right>div>div:first-child>img:first-child{
            left:1px;
            width:100px;
            height:100px;
            border-radius: 101px;
        }
        .course_info>.right>div>div:first-child>img:last-child:hover{
{#            cursor: pointer;#}
        }
        .course_info>.right>div>div:first-child>img{
            position: absolute;
        }

        .course_info>.right>div>div:last-child{
            float: right;
            width:65%;
        }
        .course_info>.right>div>div:last-child>h4{
            font-size: 14px;
            color: #5A646E;
            letter-spacing: 0.54px;
            font-weight: bolder;
        }
        .course_info>.right>div>div:last-child>h5{
            font-size: 14px;
            color: #5A646E;
            letter-spacing: 0.54px;
        }
        .course_info>.right>div>div:last-child>p{
            font-size: 14px;
            color: #5A646E;
            letter-spacing: 0.54px;
            opacity: 0.8;
        }
        /*course_info END*/
    </style>
</head>
<body>
<main class="main-wrap">
    <header id="navbar1" class="navbar1">{% include "navbar.html" %}</header>
    <div class="course_head_BG">
        <h1>课程</h1>
        <section id="course_head" class="course_head">
            <video ondblclick="video_FullScreen()" poster="" preload="auto" onended="video_ended()" onclick="video_Pause()" id="example_video_1" class="video-js vjs-default-skin vjs-big-play-centered" controls width="62%" height="100%"
                   data-setup='{"example_option":true}'>
                <source id="video_source" src="{{ course.intrv.url }}" type="video/mp4" />
            </video>
            <div class="video_play_svg_div" id="video_play_svg_div"  onclick="video_play()"></div>
            <svg onclick="video_play()" id="video_bofang" class="video_bofang" width="40px" height="40px" viewBox="153 689 24 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <path d="M155.84938,711.622493 C154.196012,711.622493 153.529394,710.455609 154.352536,709.029884 L163.566059,693.071595 C164.392743,691.639737 165.736603,691.64587 166.559746,693.071595 L175.773269,709.029884 C176.599952,710.461743 175.922711,711.622493 174.276425,711.622493 L155.84938,711.622493 Z" id="Star-3" stroke="#FFFFFF" stroke-width="3" fill="#FFFFFF" fill-rule="evenodd" transform="translate(165.063044, 701.811247) rotate(90.000000) translate(-165.063044, -701.811247) "></path>
            </svg>
            <div class="course_desc">
                <h3>{{ course.name }}</h3>
                <div class="course_desc_text">{{ course.desc | safe}}</div>

                <div class="course_play_div">
                    {% if request.session.login != True %}
                        <div onclick="showLogin()">开始学习</div>
                    {% else %}
                        {% if jindu == '100.00%' %}
                            <div onclick="window.open('{{ url }}','_blank')">评价课程</div>
                        {% elif jindu == '0.00%' %}
                            <div onclick="window.open('{{ url }}','_blank')">开始学习</div>
                        {% else %}
                            <div onclick="window.open('{{ url }}','_blank')">继续学习</div>
                        {% endif %}
                    {% endif %}
                    <span>{{ course_process }}</span>
                </div>
                <div class="progressBar">
                    <!--进度条-->
                  <span style="width: {{ jindu }};background-color: {{ course.color }};"></span>
                </div>
                <div class="difficulty">难易度：
                    {% for xx in xingxing %}
                        {% if course.difficult > xx %}
                            <img src="/static/svg/xingxing_1.svg" alt="">
                         {% else %}
                            <img src="/static/svg/xingxing.svg" alt="">
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </section>
    </div>
    <div class="slideDIV" style="height:100px;"></div>
    <section class="course_info clearfix">
        <div class="left">
            {% if course.target_user %}
            <h2>目标受众</h2>
            <div class="text">{{ course.target_user|safe }}</div>
            {% endif %}

            {% if course.require_knowledge %}
            <h2>先修要求</h2>
            <div class="text">{{ course.require_knowledge|safe }}</div>
            {% endif %}

            {% if course.require_env %}
            <h2>软/硬件要求</h2>
            <div class="text">{{ course.require_env|safe }}</div>
            {% endif %}

            <h2>课程表</h2>
            <!--章节-->
            {% for section in sections %}
                <div class="course_section">
                <h3>{{ section.title }}</h3>
                <div class="clearfix">
                    <div onclick="sectionLI_toggle(this)">{{ section.process }}&nbsp;&nbsp;<img class="img_down" src="/static/svg/zhankaizhishi.svg" alt=""></div>
                    <div>{{ section.desc|safe }}</div>
                </div>
                <ul class="ectionUL">
                    {% for video in section.videos %}
                        <li onclick="play({{video.id}}, {{video.vtype}})">
                            {% if video.status == 0 %}
                                <img src="/static/svg/xiaoduigou.svg" alt="">{{ video.name }}<span>{{ video.vtime }}</span>
                            {% elif video.vtype == 0 %}
                                <img src="/static/svg/xiaoplay.svg" alt="">{{ video.name }}<span>{{ video.vtime }}</span>
                            {% else %}
                                <img src="/static/svg/question.svg" alt="">{{ video.name }}<span>{{ video.vtime }}</span>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            </div>
            {% endfor %}
        </div>
        <div class="right">
            <h2>课程讲师</h2>
            <div class="clearfix">
                <div>
                    <img src="{{ course.teach.headimg }}" alt=""/>
                    <img src="/static/head/techer_frame.svg" alt=""/>
                </div>
                <div>
                    <h4>{{ course.teach.nickname }}</h4>
                    <h5>{{ course.teach.position }}</h5>
                    <p>{{ course.teach.intro | safe }}</p>
                </div>
            </div>
            {% if course.teacher %}
            <div class="clearfix">
                <div>
                    <img src="{{ course.teacher.headimg }}" alt=""/>
                    <img src="/static/head/techer_frame.svg" alt=""/>
                </div>
                <div>
                    <h4>{{ course.teacher.nickname }}</h4>
                    <h5>{{ course.teacher.position }}</h5>
                    <p>{{ course.teacher.intro }}</p>
                </div>
            </div>
            {% endif %}
        </div>
    </section>
    <div class="slideDIV" style="height:150px;"></div>
    <footer class="footer_curr" id="footer_curr">{% include "footer.html" %}</footer>
</main>
{% include "search_div.html" %}
{% include "feedback.html" %}
</body>
<script type="text/javascript" src="/static/utf8-php/ueditor.parse.js"></script>
<script src="/static/js/video.js"></script>
{% include "commonJS.html" %}
<script>
    window.document.onscroll = function(){
        if($(document).scrollTop() == 0){
            $("#head_cont").css("box-shadow","none");
        }else{
            $("#head_cont").css("box-shadow","0 2px 1px rgba(0,0,0,0.5)");
        }
    }

    uParse(".text",{
        rootPath: '/static/utf8-php'
    });

    function video_FullScreen(){
        var elem = document.getElementById("example_video_1");
        if (document.fullscreenElement ||
                document.mozFullScreenElement || document.webkitFullscreenElement) {
            if (document.cancelFullScreen) {
                document.cancelFullScreen();
            } else if (document.mozCancelFullScreen) {
                document.mozCancelFullScreen();
            } else if (document.webkitCancelFullScreen) {
                document.webkitCancelFullScreen();
            }
        } else {
            if (elem.requestFullscreen) {
                elem.requestFullscreen();
            } else if (elem.mozRequestFullScreen) {
                elem.mozRequestFullScreen();
            } else if (elem.webkitRequestFullscreen) {
                elem.webkitRequestFullscreen();
            }
        }
    }

    function video_ended(){
        video_bofang.style.display = "none";
        video_play_svg_div.style.display = "none";
        example_video_1.style.zIndex = "0";
    }

    function video_Pause(){
        var elem = document.getElementsByTagName("video")[0];
        if(elem.paused){
            video_bofang.style.display = "block";
            video_play_svg_div.style.display = "block";
        }else{
            video_bofang.style.display = "none";
            video_play_svg_div.style.display = "none";
        }
    }
    function video_play(){
        var elem = document.getElementsByTagName("video")[0];
        elem.play();
        video_bofang.style.display = "none";
        video_play_svg_div.style.display = "none";
    }
    function sectionLI_toggle(t){
        $(t).parent().parent().find(".ectionUL li").slideToggle(350);
        if($(t).find("img").attr("class") == "img_down"){
            $(t).find("img").attr("class","img_right");
        }else{
            $(t).find("img").attr("class","img_down");
        }
    }
    function play(vid,vtype){
        if($("#uid").val()){
            if(vtype == "0"){
                window.open("/video/"+vid);
            }else{
                window.open("/practice/"+vid);
            }
        }else{
            showLogin();
        }
    }

    function showLogin(){
        $("#login_button").click();
    }
</script>
</html>