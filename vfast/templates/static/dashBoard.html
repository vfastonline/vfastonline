<!DOCTYPE html>
<html>
<head>
    <title></title>
    {% include "head.html" %}
    <link rel="stylesheet" href="/static/css/progressBar.css">
   <!-- <link rel="stylesheet" href="/static/css/calendar.css">-->
    <link rel="stylesheet" href="/static/css/chartist.css">
    <script src="/static/js/chartist.js"></script>
    <style>
        #head_cont{
            box-shadow: none;
        }
        /*promptEL Start*/
        .promptEL{
            width: 1200px;
            height: 100px;
            overflow: hidden;
            background: #5ACD91;
            box-shadow: 0 2px 0 0 rgba(0,0,0,0.10);
            margin: 50px auto 0px;
            position: relative;
            transition: all 0.35s ease-in-out;
        }
        .promptEL svg{
            position: absolute;
            top: 39px;
            left: 20px;
        }
        .promptEL svg:hover{
            cursor: pointer;
        }
        .promptEL svg:hover path{
            fill: #607D8B;
        }
        .promptEL svg:active path{
            fill: #FFFFFF;
        }
        .promptEL p{
            height: 100px;
            line-height: 100px;
            font-size: 18px;
            color: #FFFFFF;
            padding-left: 70px;
        }
        /*promptEL END*/
        .promptEL_plan{
            width: 1200px;
            height: 110px;
            overflow: hidden;
            box-shadow: 0 2px 0 0 rgba(0,0,0,0.10);
            border-radius: 4px;
            margin: 50px auto 0px;
            position: relative;
            transition: all 0.35s ease-in-out;
            background: #5ACD91;
        }
        .promptEL_plan svg{
            position: absolute;
            top: 20px;
            left: 20px;
        }
        .promptEL_plan svg:hover{
            cursor: pointer;
        }
        .promptEL_plan svg:hover path{
            fill: #607D8B;
        }
        .promptEL_plan svg:active path{
            fill: #FFFFFF;
        }
        .promptEL_plan>h3{
            padding-left: 70px;
            color: #FFFFFF;
            font-size: 24px;
            padding-top: 5px;
        }
        .promptEL_plan>p{
            font-size: 18px;
            color: #FFFFFF;
            padding-left: 70px;
        }
        .promptEL_plan>div{
            position: absolute;
            right: 80px;
            top: 61px;
            font-size: 18px;
            color: #FFFFFF;
        }
        .promptEL_plan>div>strong{
            font-size: 36px;
            line-height: 22px;
        }


        /*contentBody Start*/
        .contentBody{
            width: 1200px;
            margin: 50px auto 0px;
        }
        .contentBody_left{
            width:60%;
            background: #FFFFFF;
            padding-bottom: 10px;
            border-radius: 4px;
            box-shadow: 0 2px 0 0 rgba(0,0,0,0.10);
        }
        .contentBody_left_head{
            padding: 10px 30px 30px;
        }
        .contentBody_left_head h3{
            font-size: 20px;
            color: #384047;
            font-weight: bolder;
        }
        .contentBody_left_head h2{
            font-size: 24px;
            color: #384047;
            font-weight: bolder;
        }
        .contentBody_left_head h4{
            font-size: 18px;
            color: #384047;
            font-weight: bolder;
            float: right;
            position: relative;
            top: -40px;
        }
        .contentBody_right{
            width:38%;
{#            background: #FFFFFF;#}
{#            box-shadow: 0 2px 0 0 rgba(0,0,0,0.10);#}
            border-radius: 4px;
            padding-bottom: 10px;
        }
        .contentBody_right>p{
            background: #FFFFFF;
            box-shadow: 0 2px 0 0 rgba(0,0,0,0.10);
            padding-bottom: 10px;
            border-radius: 4px;
        }
        /*contentBody END*/
        /*contentBody_left_body--0-- Start*/
        .contentBody_left_body a{
            -webkit-transition: background 0.35s,opacity 0.35s;
            -moz-transition: background 0.35s,opacity 0.35s;
            -ms-transition: background 0.35s,opacity 0.35s;
            -o-transition: background 0.35s,opacity 0.35s;
            transition: background 0.35s,opacity 0.35s;
        }
        .contentBody_left_body ul{
            margin-bottom: 0px;
        }
        .contentBody_left_body ul a{
            display: block;
            background: #F0F2F4;

            height: 56px;
        }
        .contentBody_left_body ul a li{
            position: relative;
            height: 56px;
            line-height: 56px;
            padding: 0px 50px;
        }
        .contentBody_left_body ul a li span{
            font-size: 14px;
            color: #607D8B;
            margin-left: 20px;
        }
        .contentBody_left_body ul a li time{
            font-size: 14px;
            color: #7B8B8E;
            position: absolute;
            right: 50px;
        }
        .contentBody_left_body ul a:hover{
            background: #FFFFFF;
         box-shadow: inset 0 1px 1px #D4D9DD;
        }
        /*contentBody_left_body--0-- End*/
        /*contentBody_left_body--1-- Start*/
        .contentBody_left_body ul .courseIN{
            position: relative;
            height:136px;
            background: #607D8B;
            box-shadow: inset 0 1px 0 0 #848484;
        }
        .contentBody_left_body ul .courseIN>div{
            background: #4DD0E1;
            height: 136px;
            width:60%;
            position: absolute;
            z-index: 1;
        }
        .contentBody_left_body ul .courseIN li{
            position: relative;
        }
        .contentBody_left_body ul .courseIN li div span{
            color: #FFFFFF;
        }
        .contentBody_left_body ul .courseIN li div:first-child{
            position: relative;
            z-index: 1;
        }
        .contentBody_left_body ul .courseIN li div:first-child time{
            right: 0px;
            color: #FFFFFF;
        }
        .contentBody_left_body ul .courseIN li div:last-child{
            position: relative;
            z-index: 1;
            padding: 0px 50px;
        }
        .contentBody_left_body ul .courseIN li div:last-child span{
            font-size: 18px;
        }
        .contentBody_left_body ul .courseIN li div:last-child img:last-child{
            position: absolute;
            right: 50px;
            height: 56px;
            line-height: 56px;
        }
        .contentBody_left_body ul .courseIN:hover{
            background: #607D8B;
            box-shadow: inset 0 0px 0px #D4D9DD;
            opacity:0.8;
        }
        /*contentBody_left_body--1-- End*/

        /*plan_head Start*/
        .plan_head{
            padding: 20px 30px 10px;
            background-color: #FFFFFF;
{#            box-shadow: 0 2px 0 0 rgba(0,0,0,0.10);#}
        }
        .plan_head h3{
            font-size: 20px;
            color: #384047;
            font-weight: bolder;
        }
        .plan_head p{
            font-size: 14px;
            color: #5A646E;
        }
        /*plan_head End*/
        /*plan_body Start*/
        .plan_body ul li{
            position: relative;
            height: 56px;
            line-height: 56px;
            padding-left: 50px;
            padding-right: 20px;
            background: #F0F2F4;
            box-shadow: inset 0 1px 0 0 #D4D9DD;
            -webkit-transition: background 0.35s,opacity 0.35s;
            -moz-transition: background 0.35s,opacity 0.35s;
            -ms-transition: background 0.35s,opacity 0.35s;
            -o-transition: background 0.35s,opacity 0.35s;
            transition: background 0.35s,opacity 0.35s;
        }
        .plan_body ul li:hover{
            background: #4DD0E1;
{#            box-shadow: inset 0 2px 5px #D4D9DD;#}
{#            cursor: pointer;#}
        }
        .plan_body ul .plan_finish:hover{
            opacity: 0.8;
            background: #4DB6AC;
            box-shadow: none;
        }
        .plan_body ul li span{
            font-size: 14px;
            color: #5A646E;
            margin-left: 30px;
        }
        .plan_body ul li time{
            position: absolute;
            right: 20px;
            font-size: 14px;
            color: #96AAAF;
        }
        .plan_body ul .plan_finish{
            background: #4DB6AC;
        }
        .plan_body ul .plan_finish span{
            color: #FFFFFF;
        }
        .plan_body ul .plan_finish time{
            color: #FFFFFF;
        }
        .plan_body ul{
            margin-bottom: 0px;
        }
        /*plan_body End*/

        .courseING{
            font-size: 20px;
            font-weight: bolder;
            color: #384047;
            width: 1200px;
            margin: 0px auto 0px;
        }
        /*contentBody_course Start*/
        .contentBody_course:after{content: "";display: block;clear: both;}
        .contentBody_course{
            width: 1200px;
            margin: 0 auto;
            margin-top: 30px;
            color: #5A646E;
        }
        .contentBody_course>div{
            float: left;
            width: 720px;
            margin-bottom: 30px;
            transition: all 0s linear;
            box-shadow: 0 2px 0 0 rgba(0,0,0,0.10);
            border-radius: 4px;
            overflow: hidden;
        }
        .contentBody_course>div:hover{
            position: relative;
            top:-1px;
        }
        .contentBody_course>div>div:first-child{
            transition: all 0s;
        }
        .contentBody_course>div>div:last-child{
            transition: all 0s;
        }
        .contentBody_course>div:hover>div:first-child{
            cursor: pointer;
            opacity: 0.8!important;
        }
        .contentBody_course>div:hover>div:last-child{
            background-color: #FAFAFA;
            cursor: pointer;
        }
        .contentBody_course>div:nth-child(3n+2){
        }
        .contentBody_course>div>div:first-child{
            /*背景色 数据库取*/
            background-color: #EF5350;
            height: 54px;
            padding-top: 15px;
            padding-left: 20px;
            padding-right: 20px;
        }
        .contentBody_course>div>div:first-child{content:"";display: block;clear: both;}
        .contentBody_course>div>div:first-child>div:first-child{
            float: left;
        }
        .contentBody_course>div>div:first-child>div:last-child{
            float: right;
            color: #FFFFFF;
            font-size: 14px;
        }
        .contentBody_course>div>div:last-child{
            padding: 20px 30px 30px 20px ;
            font-size: 14px;
            background-color: #FFFFFF;
            height:220px;
            position: relative;
        }
        .contentBody_course>div>div:last-child>p:first-child{
            color: #B4BEC8;
        }
        .contentBody_course>div>div:last-child>h1{
            font-size: 20px;
            color: #5A646E;
            margin-top: 5px;
            margin-bottom: 10px;
            font-weight: 400;
        }
        .contentBody_course>div>div:last-child>div:nth-child(3){
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
            height: 60px;
            line-height: 20px;
            font-size: 14px;
            color: #5A646E;
        }
        .contentBody_course>div>div:last-child>div:nth-child(4){
            color: #FFFFFF;
            height: 24px;
            font-size: 16px;
            border-radius: 12px;
            line-height: 24px;
            display: inline-block;
            padding-left: 10px;
            padding-right: 10px;
            transition: all 0s;
            position: absolute;
            bottom:20px;
            -moz-user-select:none;/*火狐*/
            -webkit-user-select:none;/*webkit浏览器*/
            -ms-user-select:none;/*IE10*/
            -khtml-user-select:none;/*早期浏览器*/
            user-select:none;
        }
        .groupHover:hover{
            box-shadow: 0px 1px 1px black;
            bottom: 21px!important;
        }
        .groupHover:active{
            box-shadow: 0px 0px 0px black;
            bottom: 20px!important;
        }
        .contentBody_course>div>div:last-child>div:nth-child(5){
            height: 20px;
            line-height: 20px;
            font-size: 17px;
            display: inline-block;
            position: absolute;
            bottom: 20px;
            right: 30px;
            vertical-align: middle;
        }
        .contentBody_course>div>div:last-child>div:nth-child(5)>img{
            padding-bottom: 5px;
        }
        /*contentBody_course  End*/
       .charts{
            width: 456px;
            height: 340px;
            background-color: darkorange;
        }
        .tooltip {
              z-index: 1;
              padding: 5px;
              opacity: 1;
              width: 100px;
              height: 40px;
              background: lightgreen;
              border-radius: 5px;
              position: relative;
              top: 30px;
          }
        .tooltip:after{
            content: "";
            position: absolute;
            border-style: solid;
            border-color: lightgreen transparent transparent;
            border-width: 10px;
            bottom: -20px;
            right:40px;
        }
    </style>
</head>
<body>
<main class="main-wrap">
    <header id="navbar1" class="navbar1">{% include "navbar.html" %}</header>
    <div class="slideDIV" style="height:50px;"></div>
    <article class="promptEL" id="promptEL">
        <svg onclick="article_close()" width="20px" height="20px" viewBox="134 130 20 15" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <g id="x-symble" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(137.000000, 130.000000)">
                <path d="M7.20576489,5.31058741 L2.61295973,0.717782253 C2.03812111,0.142943636 1.08708004,0.139700026 0.502496327,0.724283738 C-0.0861629951,1.31294306 -0.0849981989,2.2537541 0.495994842,2.83474714 L5.0888,7.4275523 L0.496158495,12.0201938 C-0.0786801222,12.5950324 -0.0819970018,13.5460002 0.502496327,14.1304935 C1.09106464,14.7190619 2.03180304,14.7178244 2.61279608,14.1368314 L7.20543758,9.54418988 L11.7984742,14.1372265 C12.3733128,14.7120651 13.3243539,14.7153087 13.9089376,14.130725 C14.4975969,13.5420657 14.4964321,12.6012546 13.9154391,12.0202616 L9.32240247,7.42722499 L13.9152754,2.83435205 C14.490114,2.25951343 14.4934309,1.30854563 13.9089376,0.724052298 C13.3203693,0.135483989 12.3796309,0.136721425 11.7986378,0.717714465 L7.20576489,5.31058741 Z" id="Combined-Shape" fill="#FFFFFF"></path>
            </g>
        </svg>
        <p>恭喜！你所填写的背景资料中的硬性指标优于本站 59% 的注册用户，加油，做更好的自己！</p>
    </article>
    {% if flag %}
    <article class="promptEL_plan" id="promptEL_plan">
        <svg onclick="article_close_plan()" width="20px" height="20px" viewBox="134 130 20 15" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <g id="x-symble" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(137.000000, 130.000000)">
                <path d="M7.20576489,5.31058741 L2.61295973,0.717782253 C2.03812111,0.142943636 1.08708004,0.139700026 0.502496327,0.724283738 C-0.0861629951,1.31294306 -0.0849981989,2.2537541 0.495994842,2.83474714 L5.0888,7.4275523 L0.496158495,12.0201938 C-0.0786801222,12.5950324 -0.0819970018,13.5460002 0.502496327,14.1304935 C1.09106464,14.7190619 2.03180304,14.7178244 2.61279608,14.1368314 L7.20543758,9.54418988 L11.7984742,14.1372265 C12.3733128,14.7120651 13.3243539,14.7153087 13.9089376,14.130725 C14.4975969,13.5420657 14.4964321,12.6012546 13.9154391,12.0202616 L9.32240247,7.42722499 L13.9152754,2.83435205 C14.490114,2.25951343 14.4934309,1.30854563 13.9089376,0.724052298 C13.3203693,0.135483989 12.3796309,0.136721425 11.7986378,0.717714465 L7.20576489,5.31058741 Z" id="Combined-Shape" fill="#FFFFFF"></path>
            </g>
        </svg>
        <h3>日常任务已完成</h3>
        <p>是时候去休息一下了，分散你的学习时间，可以得到最佳的学习效果！加油</p>
        <div>获得积分：<strong>+10</strong></div>
    </article>
    {% endif %}

    <div class="slideDIV" style="height:100px;"></div>

{% if path_flag == True %}
    <section class="contentBody clearfix">
        <div class="contentBody_left pull-left">
            <div class="contentBody_left_head">
                <h3>正在进行的路线</h3>
                <h2>{{ path_name }}</h2>
                <h4>{{ jindu }}</h4>
                <div class="progressBar">
                  <span class="blue" style="width: {{ jindu }};"></span>
                </div>
            </div>
            <div class="contentBody_left_body">
                <ul>
                    {% for course in courses_path %}
                        {% load mytags %}
                        {% if course.flag == 1 %}
                            <a href="{{ course| dashboard_get_lession_url}}" class="courseIN">
                                <div style="width: {{ course.video_jindu }};"></div>
                                <li>
                                    <div>
                                        {% if course.icon == 0 %}
                                            <img src="/static/svg/videoCourse_1.svg" width="24px" height="24px" alt="">
                                        {% else %}
                                            <img src="/static/svg/project_1.svg" width="24px" height="24px" alt="">
                                        {% endif %}
                                        <span>{{ course.name }}</span>
                                        <time>{{ course.viewtime }}</time>
                                    </div>
                                    <div>
                                        {% if course.vtype == 0 %}
                                            <img src="/static/svg/video_1.svg" width="24px" height="24px" alt="">
                                        {% else %}
                                            <img src="/static/svg/quiz_1.svg" width="24px" height="24px" alt="">
                                        {% endif %}
                                        <span>{{ course.video_name }}</span>
                                        <img src="/static/svg/arrow.svg" width="16px" height="16px" alt="">
                                    </div>
                                </li>
                            </a>
                        {% else %}
                            <a href="{{ course | dashboard_get_lession_url}}">
                                <li>
                                    {% if course.icon == 0 %}
                                        <img src="/static/svg/videoCourse.svg" width="24px" height="24px" alt="">
                                    {% else %}
                                        <img src="/static/svg/project.svg" width="24px" height="24px" alt="">
                                    {% endif %}
                                    <span>{{ course.name }}</span>
                                    <time>{{ course.viewtime }}</time>
                                </li>
                            </a>
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
        </div>
    <div class="contentBody_right pull-right">
           <!--<div id="CalendarMain">
                <div id="title">
                    <img src="/static/svg/minus.svg" onclick="CalendarHandler.CalculateLastMonthDays();">
                    <div>
                        <span class=" selectYear" id="selectYear"></span>
                        <span class=" selectMonth" id="selectMonth"></span>
                    </div>
                    <span class=" currentDay" onClick="CalendarHandler.CreateCurrentCalendar(0,0,0);"></span>
                    <img src="/static/svg/plus.svg" onClick="CalendarHandler.CalculateNextMonthDays();">
                </div>
                <div id="context" style="height: 295px">
                    <div class="week">
                        <h3> 一 </h3>
                        <h3> 二 </h3>
                        <h3> 三 </h3>
                        <h3> 四 </h3>
                        <h3> 五 </h3>
                        <h3> 六 </h3>
                        <h3> 日 </h3>
                    </div>
                    <div id="center">
                        <div id="centerMain">
                        <div id="selectYearDiv"></div>
                        <div id="centerCalendarMain">
                            <div id="Container"></div>
                        </div>
                        <div id="selectMonthDiv"></div>
                        </div>
                    </div>
                </div>
            </div> -->
            <div class="charts">
                <div class="ct-chart ct-perfect-fourth"></div>
            </div>
            <div class="plan_head">
                <h3>今日学习计划</h3>
                <p>您好，{{ request.session.user.nickname }}同学！根据你的最近学习情况，我们向你推荐学习课程。建议你今天完成下面的学习内容</p>
            </div>
            <div class="plan_body">
                <ul>
                    {% for task in tasks %}
                        {% if task.vtype == 0 and task.status == 0 %}
                            <li class="plan_finish" onclick="location.href='/video/{{ task.video_id }}'">
                            <img src="/static/svg/video_1.svg" alt="">
                        {% elif task.vtype == 0 and task.status == 1 %}
                            <li onclick="location.href='/video/{{ task.video_id }}'">
                            <img src="/static/svg/video.svg" alt="">
                        {% elif task.vtype == 1 and task.status == 0 %}
                            <li class="plan_finish" onclick="location.href='/practice/{{ task.video_id }}'">
                            <img src="/static/svg/quiz_1.svg" alt="">
                        {% else %}
                            <li onclick="location.href='/practice/{{ task.video_id }}'">
                            <img src="/static/svg/quiz.svg" alt="">
                        {% endif %}
                        <span>{{ task.video_name }}</span>
                        <time>{{ task.vtime }}</time>
                    </li>
                    {% endfor %}
                </ul>
            </div>

                  <script>
    new Chartist.Line('.ct-chart', {
        labels: ['周一', '周二', '周三', '周四', '周五','周六','周日'],
        series: [{
                name:'今日得分',
                data:[1,5,3,5,4,6]
            }]
    }, {

        fullWidth: false,
        chartPadding: {
            right: 40
        }
    });
    var $tooltip = $('<div class="tooltip tooltip-hidden"></div>').appendTo($('.ct-chart'));

    $(document).on('mouseenter', '.ct-point', function() {
        var seriesName = $(this).closest('.ct-series').attr('ct:series-name'),
            value = $(this).attr('ct:value');

        $tooltip.text(seriesName + ': ' + value);
        $tooltip.removeClass('tooltip-hidden');
    });

    $(document).on('mouseleave', '.ct-point', function() {
        $tooltip.addClass('tooltip-hidden');
    });

    $(document).on('mousemove', '.ct-point', function(event) {
        console.log(event);
        $tooltip.css({
            left: (event.offsetX || event.originalEvent.layerX) - $tooltip.width() / 2,
            top: (event.offsetY || event.originalEvent.layerY) - $tooltip.height() - 20
        });
    });
            </script>
            </div>
    {% if courses %}
        <h2 class="courseING" style="margin-top: 400px">正在进行的课程</h2>
    {% endif %}
    <section class="contentBody_course">
        {% for course in courses %}
            <div>
            <div style="background-color: {{ course.color }};">
                <div>
                    {% if course.icon == 0 %}
                        <img src="/static/svg/videoCourse_1.svg" alt="">
                    {% else %}
                        <img src="/static/svg/project_1.svg" alt="">
                    {% endif %}
                </div>
                <div>72小时</div>
            </div>
            <!--判断是跳转视频, 还是题目-->
            {% if course.video_type == 0 %}      <!--跳转到视频-->
                <div onclick="play_video('/video/{{ course.video_id }}')">
            {% else %}
                <div onclick="play_video('/practice/{{ course.video_id }}')">   <!--跳转到题目-->
            {% endif %}
        <p>系列课程</p>
        <h1>{{ course.name }}</h1>
        <div>{{ course.desc |safe}}</div>
            <div style="background-color: {{ course.tech_color }};" class="groupHover" onclick="stopPPG(this)">{{ course.tech_name }}</div>
        <div>难易度:
            {% for xx in xingxing %}
                {% if course.difficult > xx%}
                    <img src="/static/svg/xingxing_1.svg" alt="">
                {% else %}
                    <img src="/static/svg/xingxing.svg" alt="">
                {% endif %}
            {% endfor %}
        </div>
        </div>
        </div>
        {% endfor %}
    </section>
    </section>
{% endif %}
    <footer class="footer_curr" id="footer_curr">{% include "footer.html" %}</footer>
</main>
{% include "search_div.html" %}
{% include "feedback.html" %}
</body>
{% include "commonJS.html" %}
<!--<script src="/static/js/chartist.js"></script>-->
<script type="text/javascript">
{% comment %}$(document).ready(function(e) {
    CalendarHandler.initialize();

    getScore();
});
window.document.onscroll = function(){
    if($(document).scrollTop() == 0){
        $("#head_cont").css("box-shadow","none");
    }else{
        $("#head_cont").css("box-shadow","0 2px 1px rgba(0,0,0,0.5)");
    }
}

function getScore(){
    var year = $("#selectYear").html();
    var month = $("#selectMonth").html();
    year = year.substring(0,year.length-1);
    month = month.substring(0,month.length-1);
    if(month<10){
        month = "0"+month;
    }
    var date = year+"-"+month;
    var strurl = location.href;
    strurl = strurl.substring(strurl.indexOf("/u/")+3,strurl.length-1);
    $.getJSON("/r/monthscore?date="+date+"&uid="+strurl,function(data){
        var itemArr = $("div[class='item'],.currentItem");
        for(var i = 0 ; i<itemArr.length;i++){
            for(var item in data){
                if(itemArr[i].getElementsByTagName("a")[0].innerHTML == item){
                    $(itemArr[i]).addClass("item_score")
                    itemArr[i].setAttribute('data-beforeData',data[item]);
                }
            }
        }
    });
}
function article_close(){
    promptEL.style.height = 0;
    promptEL.style.marginTop = 0;
}
function article_close_plan(){
    promptEL_plan.style.height = 0;
    promptEL_plan.style.marginTop = 0;
}
function play_video(urlStr){
	window.open(urlStr,"_blank ");
}{% endcomment %}
</script>
</html>