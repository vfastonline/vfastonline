<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title></title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="/static/js/jquery-2.1.4.js"></script>
    <script src="/static/js/bootstrap.min.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="/static/css/jquery-labelauty.css">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/layout.css"/>
    <link rel="stylesheet" href="/static/css/sweet-alert.css"/>
    <link rel="stylesheet" type="text/css" href="/static/css/search.css" />
    <!--[if IE]>
    <script src="http://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.js"></script>
    <![endif]-->
    <script>document.documentElement.className = 'js';</script>
    <style>
        #head_cont{
            box-shadow: none;
        }
        /*promptEL Start*/
        .promptEL{
            width: 1200px;
            height: 200px;
            background: #FFFFFF;
            box-shadow: 0 2px 0 0 rgba(181,181,181,0.10);
            border-radius: 4px;
            margin: 50px auto 0px;
            position: relative;
            transition: all 0.35s ease-in-out;
            overflow: hidden;
            padding: 10px 50px;
        }
        .promptEL>svg{
            position: absolute;
            top:10px;
            left:15px;
        }
        .promptEL>svg:hover{
            cursor: pointer;
            opacity: 0.8;
        }
        .promptEL>h2{
            font-size: 28px;
            color: #5A646E;
            letter-spacing: 2px;
        }
        .promptEL>p{
            font-size: 14px;
            color: #5A646E;
            letter-spacing: 0.4px;
        }
        .promptEL>img{
            position:absolute;
            top:5px;
            right:30px;
        }

        /*info_section*/
        .info_section{
            width: 1200px;
            margin: 30px auto;
        }

        .info_left{
            width: 72.25%;
            float: left;
        }
        .info_right{
            width: 25.5%;
            float: right;
        }
        /*info_section END*/

        /*info_left_1*/
        .info_left_1{
            background: #FFFFFF;
            box-shadow: 0 2px 0 0 rgba(181,181,181,0.10);
            border-radius: 4px;
            padding: 30px 50px 30px 50px;
            position: relative;
            height:185px;
        }

        .info_left_1>div:first-child{
            width:100px;
            height:100px;
            position: relative;
            margin-top: 12px;
        }
        .info_left_1>div:first-child>img:nth-child(1){
            width:97px;
            height:97px;
            position: absolute;
        }
        .info_left_1>div:first-child>img:nth-child(2){
            width:100px;
            height:100px;
            position: absolute;
        }
        .info_left_1>div:first-child>img:nth-child(3){
            width:32px;
            height:32px;
            position: absolute;
            right:6px;
        }
        .info_left_1>div:nth-child(2){
            width:70%;
            height:100%;
            position: absolute;
            top:0px;
            left:200px;
            padding: 10px 0px;
        }
        .info_left_1>div:nth-child(2)>h3{
            font-size: 20px;
            color: #5A646E;
            font-weight: bolder;
        }
        .info_left_1>div:nth-child(2)>span{
            font-size: 14px;
            color: #829191;
        }
        .info_left_1>div:nth-child(2)>p{
            font-size: 14px;
            color: #5A646E;
            line-height: 18px;
            margin-top: 20px;
        }

        .info_left_1>div:nth-child(3){
            position: absolute;
            top:30px;
            right:50px;
        }
        .info_left_1>div:nth-child(3) img{
            width:32px;
            height:32px
        }
        .info_left_1>div:nth-child(3) img:hover{
            cursor: pointer;
            position: relative;
            top:-1px;
        }
        /*info_left_1 END*/

        /*info_left_2*/
        .info_left_2{
            margin-top: 30px;
            background: #FFFFFF;
            box-shadow: 0 2px 0 0 rgba(181,181,181,0.10);
            border-radius: 4px;
            padding: 10px 50px 20px 50px;
        }
        .info_left_2>ul{
            margin-bottom: 20px;
        }
        .info_left_2>ul>li{
            float: left;
            width: 20%;
            text-align: center;
            margin-top: 20px;
        }
        .info_left_2>hr{
            border: 1px solid #B4BEC8;
            opacity: 0.8;
        }
        .info_left_2>div{
            text-align: right;
            font-size: 14px;
            color: #829191;
        }
        .info_left_2>div>span{
            font-size: 24px;
            color: #002800;
            line-height: 17px;
            margin: 0 10px;
        }
        /*info_left_2 END*/

        /*info_left_3*/
        .info_left_3{
            background-color: #FAFAFA;
            margin-top: 20px;
        }

        .info_left_3>div{
            width:30%;
            height: 170px;
            background: #FFFFFF;
            box-shadow: 0 2px 0 0 rgba(0,0,0,0.10);
            border-radius: 4px;
            margin: 10px 0;
            position: relative;
            padding: 15px 20px 10px 20px;
            float: left;
        }
        .info_left_3>div:hover{
            cursor: pointer;
            top:-1px;
        }
        .info_left_3>div:active{
            cursor: pointer;
            top:0px;
        }

        .info_left_3>div:nth-child(3n+2){
            margin-left: 5%;
            margin-right: 5%;
        }

        .info_left_3>div>h5{
            font-size: 14px;
            color: #B4BEC8;
            font-weight: 400;
        }
        .info_left_3>div>h4{
            font-size: 16px;
            color: #5A646E;
            font-weight: 400;
        }
        .info_left_3>div>p{
            font-size: 14px;
            color: #5A646E;
            font-weight: 400;
        }
        .info_left_3>div>p:last-child{
            margin: 20px 0px 0px;
        }
        .info_left_3>div>img{
            position: absolute;
            top: 22px;
            right: 20px;
        }
        #repo_description{
            height:40px;
            overflow: hidden;
        }
        /*info_left_3 END*/

        /*info_left_4*/
        .info_left_4{
            background: #FFFFFF;
            box-shadow: 0 2px 0 0 rgba(181,181,181,0.10);
            border-radius: 4px;
            padding: 30px 50px;
            margin-top: 20px;
        }
        .info_left_4>p{
            font-size: 14px;
            color: #829191;
            position: relative;
        }
        .info_left_4>p>span{
            position: absolute;
            right: 0px;
            font-size: 24px;
            color: #5A646E;
        }
        .info_left_4>hr{
            border: 1px solid #B4BEC8;
            opacity: 0.8;
        }
        .info_left_4>ul li{
            float: left;
            width:12%;
            text-align: center;
            margin-right: 10%;
            height:180px;
        }
        .info_left_4>ul li:nth-child(5n+5){
            margin-right:0px;
        }
        .info_left_4>ul li>img{
            width:81px;
            height:89px;
        }
        .info_left_4>ul li>p{
            font-size: 18px;
            color: #5A646E;
            width:140px;
            max-height: 50px;
            overflow: hidden;
            position: relative;
            left:-24px;
            margin-top: 10px;
            margin-bottom: 0px;
        }
        .info_left_4>ul li>span{
            font-size: 14px;
            color: #829191;
        }

        /*info_left_4 END*/
        /*info_right_1*/
        .info_right_1{
            background: #FFFFFF;
            box-shadow: 0 2px 0 0 rgba(181,181,181,0.10);
            border-radius: 4px;
            height:118px;
            padding: 30px 0px 30px 80px;
        }
        .info_right_1>p{
            font-size: 14px;
            color: #5A646E;
            margin-bottom: 0px;
            font-weight: bolder;
        }
        .info_right_1>div{
            font-size: 18px;
            color: #A1B0B0;
        }
        .info_right_1>div>span{
            font-size: 36px;
            color: #5A646E;
            margin-right: 10px;
        }
        /*info_right_1 END*/

        /*info_right_2*/
        .info_right_2{
            margin-top: 30px;
        }
        .btn_fath{
          position: absolute;
            top: 24px;
            right: 30px;
            border-radius: 20px;
            width:35px;
            height:20px;
        }
        .on.btn_fath {
          background-color: #D6F5D7;
        }
        .on.active.btn_fath {
          background-color: #E9F1F8;
        }
        .off.btn_fath {
          background-color: #E9F1F8;
        }
        .off.active.btn_fath {
          background-color: #D6F5D7;
        }
        .move{
          width: 16px;
          height: 16px;
          position: relative;
          border-radius: 20px;
          z-index: 100;
          border: 1px solid #E9F1F8;
          background-color: #BAC3CA;
          cursor: pointer;
          transition:transform ease 0.5s ;
            top:2px;
        }
        .on .move{
          left: 17px;
          border: 1px solid #D6F5D7;
          background-color: #36C935;
        }
        .off .move{
          left: 1px;
        }
        .active.on .move{
          transform: translate(-16px,0px);
            border: 1px solid #E9F1F8;
          background-color: #BAC3CA;
        }
        .active.off .move{
          transform: translate(16px,0px);
            border: 1px solid #D6F5D7;
          background-color: #36C935;
        }

        .info_right_2>div{
            background: #FFFFFF;
            border-radius: 4px 4px 0 0;
            box-shadow: 0 2px 0 0 rgba(181,181,181,0.10), inset 0 1px 0 0 rgba(181,181,181,0.10);
            height:70px;
            line-height: 70px;
            font-size: 16px;
            color: #5A646E;
            letter-spacing: 0.46px;
            position: relative;
        }
        .info_right_2>div:hover{
            cursor: pointer;
        }
        .info_right_2>div>span{
            display: inline-block;
            margin: 0px 20px 0px 50px;
            width: 23px;
            height:22px;
            background-repeat: no-repeat;
            background-position: center center;
            vertical-align: middle;
        }
        /*info_right_2 END*/

        /*info_right_3*/
        .info_right_3{
            margin-top: 30px;
            background: #FFFFFF;
            box-shadow: 0 2px 0 0 rgba(181,181,181,0.10);
            border-radius: 4px;
            text-align: center;
            height:180px;
            padding-top: 20px;
        }
        .info_right_3>img{
            width:130px;
        }
        .info_right_3>p{
            margin-top: 10px;
            font-size: 14px;
            color: #829191;
        }
        /*info_right_3 END*/
    </style>
</head>
<body>
<main class="main-wrap">
    <header id="navbar1" class="navbar1">{% include "navbar.html" %}</header>
    <div class="slideDIV" style="height:50px;"></div>
    <article class="promptEL" id="promptEL">
        <svg onclick="article_close()" width="20px" height="20px" viewBox="134 130 20 15" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <g id="x-symble" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(137.000000, 130.000000)">
                <path d="M7.20576489,5.31058741 L2.61295973,0.717782253 C2.03812111,0.142943636 1.08708004,0.139700026 0.502496327,0.724283738 C-0.0861629951,1.31294306 -0.0849981989,2.2537541 0.495994842,2.83474714 L5.0888,7.4275523 L0.496158495,12.0201938 C-0.0786801222,12.5950324 -0.0819970018,13.5460002 0.502496327,14.1304935 C1.09106464,14.7190619 2.03180304,14.7178244 2.61279608,14.1368314 L7.20543758,9.54418988 L11.7984742,14.1372265 C12.3733128,14.7120651 13.3243539,14.7153087 13.9089376,14.130725 C14.4975969,13.5420657 14.4964321,12.6012546 13.9154391,12.0202616 L9.32240247,7.42722499 L13.9152754,2.83435205 C14.490114,2.25951343 14.4934309,1.30854563 13.9089376,0.724052298 C13.3203693,0.135483989 12.3796309,0.136721425 11.7986378,0.717714465 L7.20576489,5.31058741 Z" id="Combined-Shape" fill="#5A646E"></path>
            </g>
        </svg>
        <h2>欢迎来到你的个人中心</h2>
        <p>这里陈列了你获得的所有勋章，完成的项目，每项课程的进度等日积月累下来的信息<br/>看一下自己之前是从哪里走过来的，以及下一步要到哪里去</p>
        <br/>
        <p>不要忘了，有空的时候编辑一下自己的个人信息，让趣味相投的小伙伴看到最佳的自己 :P</p>
        <img src="/static/imgs/个人中心图.png" alt="">
    </article>

    <div class="slideDIV" style="height:100px;"></div>

    <section class="info_section clearfix">
        <div class="info_left">
            <div class="info_left_1">
                <div>
                    <img src="{{ request.session.user.headimg }}" alt=""/>
                    <img src="/static/head/120_without_rank.svg" alt=""/>
                    <img src="/static/head/online.svg" alt=""/>
                </div>
                <div>
                    <h3>{{ user.username }}</h3>
                    <span>{{ user.location }}</span>
                    <p>{{ user.intro }}</p>
                </div>
                <div>
                    {%  if user.githuburl != '' %}
                    <a href="{{ user.githuburl }}" target="_blank"><img src="/static/svg/fangmao.svg" alt=""></a>&nbsp;&nbsp;
                    {% endif %}
                    {%  if user.personpage != '' %}
                    <a href="{{ user.personpage }}" target="_blank"><img src="/static/svg/www.svg" alt=""></a>
                    {% endif %}
                </div>
            </div>
        <div class="slideDIV" style="height:50px;"></div>
            <div class="info_left_2">
                <ul class="clearfix">
                    {% for tech in tech_score %}
                        {% if tech.name == None %}
                            <li><span style='color: {{ tech.color }}'>{{ tech.score }}</span>&nbsp;&nbsp;<span>任务得分</span></li>
                        {% else %}
                            <li><span style='color: {{ tech.color }}'>{{ tech.score }}</span>&nbsp;&nbsp;<span>{{ tech.name }}</span></li>
                        {% endif %}
                    {% endfor %}
                </ul>
                <hr/>
                <div>
                    总得分:<span>{{ user.totalscore }}</span>领先于<span>53%</span>的用户
                </div>
            </div>
        <div class="slideDIV" style="height:50px;"></div>
            <div class="info_left_3 clearfix" id="info_left_3">
            </div>
        <div class="slideDIV" style="height:50px;"></div>
            <div class="info_left_4">
                <p>已获得勋章：<span>{{ badgesLen }}</span></p>
                <hr/>
                <ul class="clearfix">
                    {% for badge in badges %}
                        <li>
                            <img src="{{ badge.badgeurl }}" alt="">
                            <p>{{ badge.badgename }}</p>
                            <span>{{ badge.createtime }}</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <div class="slideDIV" style="height:50px;"></div>
        <div class="info_right">
            <div class="info_right_1">
                <p>已看课程总长</p>
                {% load mytags %}
                <div><span>{{ totaltime | secTomin }}</span>分钟</div>
            </div>
            <div class="slideDIV" style="height:50px;"></div>
            <div class="info_right_2">
                <div>
                    <span style="background-image: url('/static/svg/bianjihei.svg')"></span>
                    修改个人信息
                </div>
                <div onclick="location.href = '/logout'">
                    <span style="background-image: url('/static/svg/logout.svg')"></span>
                    退出登陆
                </div>
                <div>
                    <span style="background-image: url('/static/svg/tuijianhaoyou.svg')"></span>
                    推荐好友
                </div>
                <div>
                    <span style="background-image: url('/static/svg/chongzhi.svg')"></span>
                    重置所有提示
                </div>
                <div onclick="toogle(this)" id="{{ user.is_open }}" >
                    <span style="background-image: url('/static/svg/qiyechakan.svg')"></span>
                    允许企业查看
                    {% if user.is_open == 0 %}
                        <div id="moveDIV" class="btn_fath on" >
                        {% else %}
                        <div id="moveDIV" class="btn_fath off" >
                    {% endif %}
                    <div class="move"></div>
                  </div>
                </div>
            </div>
            <div class="slideDIV" style="height:50px;"></div>
            <div class="info_right_3">
                <img src="/static/svg/xiaoren.svg" alt="">
                <p>已受到<span>3</span>家企业的关注</p>
            </div>
        </div>
    </section>

    <div class="slideDIV" style="height:150px;"></div>
    <footer class="footer_curr" id="footer_curr">{% include "footer.html" %}</footer>
</main>
<input type="hidden" value="{{ user.githuburl }}" id="githuburl">
<input type="hidden" value="{{ user.githubrepo }}" id="githubrepo">
{% include "search_div.html" %}
</body>
<script src="/static/js/jquery-labelauty.js"></script>
<script src="/static/js/common.js"></script>
<script src="/static/js/sweet-alert.js"></script>
<script type="text/javascript">
    window.document.onscroll = function(){
        if($(document).scrollTop() == 0){
            $("#head_cont").css("box-shadow","none");
        }else{
            $("#head_cont").css("box-shadow","0 2px 1px rgba(0,0,0,0.5)");
        }
    }
    function toogle(t){
        if($(t).attr("id") == '0'){
            $(t).attr("id","1");
            $.get("/u/is_open?is_open=1",function(data){})
        }else{
            $(t).attr("id","0");
            $.get("/u/is_open?is_open=0",function(data){})
        }
        $("#moveDIV").toggleClass('active');
    }
    $(document).ready(function(e){
        var githuburl = $("#githuburl").val();
        var githubrepo = $("#githubrepo").val();
        if(githuburl != null ){
            if(githuburl.trim() != "" ){
                $.getJSON(githubrepo,function(data2){
                    for(var i = 0 ; i<data2.length;i++){
                        var branches_url = data2[i].branches_url.substring(0,data2[i].branches_url.indexOf('{'));
                        (function(i){
                            $.getJSON(branches_url,function(data3){
                                if(data2[i].description != null){
                                    $("#info_left_3").append('<div onclick="repoURL(\''+data2[i].html_url+'\')">'+
                                        "<h5>Github Repo</h5>"+
                                        "<h4>"+data2[i].name+"</h4>"+
                                        "<p id='repo_description'>"+data2[i].description+"</p>"+
                                        "<p><span>"+data3.length+"</span> 分支 | <span>"+data2[i].stargazers_count+"</span> 赞</p>"+
                                        "<img src='/static/svg/xiaomao.svg' alt=''>"+
                                    "</div>");
                                }else{
                                    $("#info_left_3").append('<div onclick="repoURL(\''+data2[i].html_url+'\')">'+
                                        "<h5>Github Repo</h5>"+
                                        "<h4>"+data2[i].name+"</h4>"+
                                        "<p id='repo_description'></p>"+
                                        "<p><span>"+data3.length+"</span> 分支 | <span>"+data2[i].stargazers_count+"</span> 赞</p>"+
                                        "<img src='/static/svg/xiaomao.svg' alt=''>"+
                                    "</div>");
                                }
                            })
                        })(i);
                    }
                })
            }
        }

    });

    function article_close(){
        promptEL.style.height = 0;
        promptEL.style.marginTop = 0;
        promptEL.style.padding = 0;
    }
    function repoURL(url){
        window.open(url,"_blank");
    }
</script>
</html>